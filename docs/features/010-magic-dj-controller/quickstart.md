# Quickstart: Magic DJ Controller

**功能**: 魔法 DJ 控制台 - 兒童語音互動 MVP 測試工具
**版本**: 010-magic-dj-controller

---

## 概述

Magic DJ Controller 是一個 Wizard of Oz 測試控制台，讓 RD 能像 DJ 一樣操作 4-6 歲兒童的語音互動測試。主要功能包括：

- **預錄音檔播放**: 零延遲播放開場、收玩具歌、過場等音檔
- **手動 VAD 控制**: 繞過 AI 自動判斷，手動控制送出時機
- **思考音效墊檔**: 在 AI 思考時播放填補音效
- **Gemini AI 對話**: 即時語音問答（如「為什麼星星會發光？」）
- **救場語音**: 應對延遲或錯誤的緊急結束機制

---

## 快速開始

### 1. 進入控制台

在 Voice Lab 側邊欄選擇 **Magic DJ** 進入控制台頁面。

### 2. 音軌列表

控制台會自動預載以下預設音軌：

| 熱鍵 | 音軌 | 用途 |
|------|------|------|
| 1 | Track_01_Intro | 開場：小怪獸自我介紹 |
| 2 | Track_02_CleanupSong | 收玩具歌：巧虎式洗腦神曲 |
| 3 | Track_03_Success | 獎勵：跑道淨空成功 |
| 4 | Track_04_BookIntro | 過場：智慧圖書館介紹 |
| 5 | Track_05_ForestIntro | 過場：迷霧森林兩條路 |
| F | Sound_Thinking | 思考音效：魔法運轉聲 |
| W | Filler_Wait | 等待填補：訊號不好 |
| E | Track_End | 緊急結束：天黑回家 |

### 3. 基本操作

#### 預錄模式（固定橋段）

- 點擊音軌列表中的音軌，或按對應熱鍵播放
- 支援同時播放多個音軌（背景音樂 + 音效）
- 點擊正在播放的音軌可停止

#### AI 對話模式（互動橋段）

1. 點擊 **切換到 AI 模式** 或按 `M` 鍵
2. 等待孩子提問
3. 聽到孩子說完後，按 **空白鍵** 強制送出
4. 系統自動播放思考音效（或按 `F` 手動觸發）
5. AI 開始回應
6. 若需中斷 AI，按 **ESC** 鍵

### 4. 救場操作

| 情境 | 操作 | 熱鍵 |
|------|------|------|
| AI 思考超過 4 秒 | 播放等待填補音效 | W |
| AI 回應出錯/幻覺 | 播放緊急結束語音 | E |

---

## 熱鍵一覽

| 熱鍵 | 功能 |
|------|------|
| Space | 強制送出（AI 模式） |
| Escape | 中斷 AI 回應 |
| M | 切換預錄/AI 模式 |
| F | 播放思考音效 |
| W | 播放等待填補 |
| E | 播放緊急結束 |
| 1-5 | 播放對應音軌 |

---

## 測試流程建議

### 模組 1：暖身（5 分鐘）

1. **開場**：按 `1` 播放 Track_01_Intro
2. **收玩具歌**：按 `2` 播放 Track_02_CleanupSong
3. **獎勵**：完成後按 `3` 播放 Track_03_Success

### 模組 2：核心 Q&A（10-15 分鐘）

1. **過場**：按 `4` 播放 Track_04_BookIntro
2. **切換 AI 模式**：按 `M`
3. **等待孩子提問**
4. **強制送出**：聽到孩子說完按 **Space**
5. **AI 回應**：等待 Gemini 回覆
6. 重複 3-5 步驟 2-3 次

### 模組 3：故事接龍（5 分鐘）

1. **過場**：按 `5` 播放 Track_05_ForestIntro
2. **等待孩子選擇**：恐龍或玩水
3. **強制送出**：按 **Space**
4. **AI 生成結局**

---

## 故障排除

### AI 沒有回應

1. 檢查網路連線
2. 按 `W` 播放等待填補音效
3. 若超過 10 秒仍無回應，按 `E` 緊急結束
4. 切換回預錄模式繼續測試

### 音軌播放失敗

1. 檢查瀏覽器控制台錯誤
2. 確認音檔 URL 正確
3. 嘗試重新載入頁面

### 麥克風無法使用

1. 確認瀏覽器已授權麥克風權限
2. 檢查音訊輸入裝置設定
3. 嘗試刷新頁面重新授權

---

## 設定說明

### System Prompt（AI 人格）

預設 Prompt 已針對 4-6 歲兒童優化：

```
You are a friendly, curious 5-year-old monster companion.
Tone: Enthusiastic, simple vocabulary, use metaphors.
Constraint: Keep answers UNDER 3 SENTENCES.
Always end with a simple follow-up question.
Language: Traditional Chinese (Taiwan).
```

可在設定中自訂 Prompt。

### 時間限制

- 預設會話時間：30 分鐘
- 警告時間：25 分鐘（剩餘 5 分鐘時提醒）

---

## 技術需求

- **瀏覽器**: Chrome 90+ 或 Edge 90+
- **音訊輸出**: 電腦需連接小怪獸音箱（藍牙或音源線）
- **網路**: 穩定網路連線（AI 對話需要）
- **權限**: 麥克風權限（AI 模式需要）
